# file: llm/services/schemas.yaml
# purpose: Schemas package specification
# updated: 2026-01-03
# source: /Users/vikrantbhosale/gitprojects/kitesforu/kitesforu-schemas/

package:
  name: kitesforu-schemas
  type: Python package
  version: managed via pyproject.toml
  distribution: Google Artifact Registry
  registry: us-central1-python.pkg.dev/kitesforu-dev/kitesforu-python/

repository:
  path: /Users/vikrantbhosale/gitprojects/kitesforu/kitesforu-schemas
  structure:
    src/kitesforu_schemas/:
      __init__.py: Package exports
      enums.py: All enumeration types
      models.py: Pydantic data models
    pyproject.toml: Package configuration
    README.md: Package documentation

purpose:
  - Single source of truth for data models
  - Shared between API and workers
  - Type safety across services
  - Consistent validation rules

enums:
  credit_system:
    - Tier: Subscription tiers
    - QueuePriority: Job priority levels
    - VoiceQuality: TTS quality options
    - ContentMode: Podcast vs Explainer

  job_tracking:
    - JobStatus: High-level job status
    - JobStage: Pipeline stage tracking
    - ResearchPlanStatus: Research plan approval
    - ResearchTaskType: Types of research tasks
    - PodcastStyle: Podcast format styles
    - ClarifierQuestionType: Question input types

  payment:
    - SubscriptionTier: Subscription levels
    - SubscriptionStatus: Stripe subscription status
    - TransactionType: Credit transaction types

  errors:
    - ErrorType: Error classification

  model_router:
    - TaskType: AI task types
    - ModelProvider: AI provider names
    - HealthStatus: Provider health
    - QuotaStatus: Quota availability
    - AlertType: Alert classifications
    - AlertSeverity: Alert severity levels

models:
  job_models:
    - PodcastJobInput: Job creation input
    - JobProgress: Progress tracking
    - PodcastJobOutputs: Job results
    - ResearchTask: Research task definition
    - ResearchPlanData: Research plan
    - PodcastJob: Complete job model

  api_models:
    - CreateJobRequest/Response
    - ClarifierAnswersRequest
    - JobStatusResponse
    - JobResultResponse
    - UserLimitsResponse
    - PricingCalculateRequest/Response
    - ClarifierQuestion

  payment_models:
    - User: User with credits
    - CreditTransaction: Credit movement
    - Subscription: Subscription record
    - TierConfig: Tier configuration
    - CheckoutRequest/Response
    - CreditsBalanceResponse

  error_models:
    - ApiError: API error format
    - ErrorReportRequest/Response
    - ErrorReport: Stored error

  model_router_models:
    - ModelCapabilities
    - ModelRequirements
    - ModelInfo
    - ModelSelection
    - ProviderHealth
    - QuotaInfo
    - AlertContext
    - RoutingDecision

  research_plan_models:
    - ResearchPlanResponse
    - ResearchPlanEditRequest/Response
    - ResearchPlanApproveRequest/Response

validation_rules:
  topic:
    min_length: 1
    max_length: 500

  duration_min:
    min: 0.5 (30 seconds)
    max: 180.0 (3 hours)

  audience:
    max_length: 200
    optional: true

  credits_balance:
    min: 0

distribution:
  publish_to: Artifact Registry
  install_command: |
    pip install kitesforu-schemas --extra-index-url https://us-central1-python.pkg.dev/kitesforu-dev/kitesforu-python/simple/

  consumers:
    - kitesforu-api
    - kitesforu-workers

versioning:
  strategy: SemVer
  changelog: CHANGELOG.md
  breaking_changes: Major version bump

testing:
  framework: pytest
  test_directory: tests/
  validation_tests: true
  serialization_tests: true
